{"ast":null,"code":"var _jsxFileName = \"/Users/vickywong/Documents/doggo-mart/src/Components/Home.js\";\nimport React, { useState, useEffect } from \"react\";\nimport \"../App.css\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport Products from \"./Products\";\nimport Container from \"react-bootstrap/Container\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport CardDeck from \"react-bootstrap/CardDeck\";\nimport Banner from \"./Banner\";\nimport Filter from \"./Filter\";\nimport Basket from \"./Basket\";\n\nfunction Home(props) {\n  const [products, setProducts] = useState([]);\n  const [cartItems, setCartItems] = useState([]);\n  const [sortValue, setSortValue] = useState(\"ascending\");\n  const [count, setCount] = useState([]);\n\n  function usePersistedState(key, defaultValue) {\n    const [state, setState] = React.useState(JSON.parse(localStorage.getItem(key)) || defaultValue);\n    useEffect(() => {\n      localStorage.setItem(key, JSON.stringify(state));\n    }, [key, state]);\n    return [state, setState];\n  }\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const res = await fetch(\"http://localhost:8000/products\");\n      const unsortedProducts = await res.json();\n      console.log(unsortedProducts, \"unsortedProducts\");\n      const sorted = sortProducts(unsortedProducts, sortValue); // set this up to combat useState not changing immediately (prevstate, result)\n\n      setProducts(sorted);\n    };\n\n    fetchData();\n  }, []);\n  useEffect(() => {\n    if (localStorage.getItem(\"cartItems\")) {\n      const initialCart = JSON.parse(localStorage.getItem(\"cartItems\"));\n      const updatedCart = HandleAddToCart(initialCart, cartItems);\n      setCartItems(updatedCart);\n      console.log({ ...cartItems\n      }, \"this is new Cart items\");\n    }\n  }, []);\n\n  const sortProducts = (list, sortValueToUse) => {\n    let sorted = list; // console.log(sorted, \"unsorted list\");\n\n    if (sortValueToUse === \"ascending\") {\n      sorted = list.sort((a, b) => a.price - b.price);\n    }\n\n    if (sortValueToUse === \"descending\") {\n      sorted = list.sort((a, b) => b.price - a.price);\n    } // console.log(sorted, \"sorted\");\n\n\n    return sorted;\n  }; // introducing another argument\n\n\n  const handleChangeSort = e => {\n    const newSortValue = e.target.value;\n    setSortValue(newSortValue);\n    const sorted = sortProducts(products, newSortValue);\n    setProducts(sorted); //setProducts() side effects, any of the ones that use useState setter functions = side effects\n\n    console.log(newSortValue, \"target value\");\n  };\n\n  const addToCart = (list, cartItemsToUse) => {\n    let updatedCart = list;\n    let productAlreadyInCart = false;\n\n    if (productAlreadyInCart) {\n      updatedCart = list.forEach(item => {\n        if (item.id === cartItemsToUse.id) {\n          item.count += 1;\n          productAlreadyInCart = true;\n        }\n      });\n    }\n\n    if (!productAlreadyInCart) {\n      updatedCart = cartItems.push({ ...product,\n        count: 1\n      });\n    }\n\n    localStorage.setItem(\"cartItems\", JSON.stringify(cartItems));\n    return updatedCart;\n  };\n\n  const HandleAddToCart = e => {\n    const newSortValue = e.target.value;\n    setSortValue(newSortValue);\n    const updatedCart = addToCart(cartItems, updatedCart);\n    setProducts(sorted); //setProducts() side effects, any of the ones that use useState setter functions = side effects\n\n    console.log(newSortValue, \"target value\"); //   this.setState(state => {\n    //     const cartItems = state.cartItems;\n    //     let productAlreadyInCart = false;\n    //     cartItems.forEach(cp => {\n    //       if (cp.id === product.id) {\n    //         cp.count += 1;\n    //         productAlreadyInCart = true;\n    //       }\n    //     });\n    //     if (!productAlreadyInCart) {\n    //       cartItems.push({ ...product, count: 1 });\n    //     }\n    //     localStorage.setItem(\"cartItems\", JSON.stringify(cartItems));\n    //     return { cartItems: cartItems };\n    //   });\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }, React.createElement(Banner, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }), React.createElement(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    className: \"homepage-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, \"Discover better-for-you Doggos\"), React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, React.createElement(Col, {\n    md: 9,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }, React.createElement(Filter, {\n    sortValue: sortValue,\n    handleChangeSort: handleChangeSort,\n    count: products.length,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }), React.createElement(\"hr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }), React.createElement(Products, {\n    products: products,\n    setProducts: setProducts,\n    HandleAddToCart: HandleAddToCart,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  })), React.createElement(Col, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }, React.createElement(Basket, {\n    cartItems: cartItems // handleRemoveFromCart={handleRemoveFromCart}\n    ,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  })))));\n}\n\nexport default Home;","map":{"version":3,"sources":["/Users/vickywong/Documents/doggo-mart/src/Components/Home.js"],"names":["React","useState","useEffect","Products","Container","Row","Col","CardDeck","Banner","Filter","Basket","Home","props","products","setProducts","cartItems","setCartItems","sortValue","setSortValue","count","setCount","usePersistedState","key","defaultValue","state","setState","JSON","parse","localStorage","getItem","setItem","stringify","fetchData","res","fetch","unsortedProducts","json","console","log","sorted","sortProducts","initialCart","updatedCart","HandleAddToCart","list","sortValueToUse","sort","a","b","price","handleChangeSort","e","newSortValue","target","value","addToCart","cartItemsToUse","productAlreadyInCart","forEach","item","id","push","product","length"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"../App.css\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport Products from \"./Products\";\nimport Container from \"react-bootstrap/Container\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport CardDeck from \"react-bootstrap/CardDeck\";\nimport Banner from \"./Banner\";\nimport Filter from \"./Filter\";\nimport Basket from \"./Basket\";\n\nfunction Home(props) {\n  const [products, setProducts] = useState([]);\n  const [cartItems, setCartItems] = useState([]);\n  const [sortValue, setSortValue] = useState(\"ascending\");\n  const [count, setCount] = useState([]);\n\n  function usePersistedState(key, defaultValue) {\n    const [state, setState] = React.useState(\n      JSON.parse(localStorage.getItem(key)) || defaultValue\n    );\n    useEffect(() => {\n      localStorage.setItem(key, JSON.stringify(state));\n    }, [key, state]);\n    return [state, setState];\n  }\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const res = await fetch(\"http://localhost:8000/products\");\n      const unsortedProducts = await res.json();\n      console.log(unsortedProducts, \"unsortedProducts\");\n      const sorted = sortProducts(unsortedProducts, sortValue);\n      // set this up to combat useState not changing immediately (prevstate, result)\n      setProducts(sorted);\n    };\n    fetchData();\n  }, []);\n\n  useEffect(() => {\n    if (localStorage.getItem(\"cartItems\")) {\n      const initialCart = JSON.parse(localStorage.getItem(\"cartItems\"));\n      const updatedCart = HandleAddToCart(initialCart, cartItems);\n      setCartItems(updatedCart);\n      console.log({ ...cartItems }, \"this is new Cart items\");\n    }\n  }, []);\n\n  const sortProducts = (list, sortValueToUse) => {\n    let sorted = list;\n    // console.log(sorted, \"unsorted list\");\n    if (sortValueToUse === \"ascending\") {\n      sorted = list.sort((a, b) => a.price - b.price);\n    }\n    if (sortValueToUse === \"descending\") {\n      sorted = list.sort((a, b) => b.price - a.price);\n    }\n    // console.log(sorted, \"sorted\");\n    return sorted;\n  };\n\n  // introducing another argument\n\n  const handleChangeSort = (e) => {\n    const newSortValue = e.target.value;\n    setSortValue(newSortValue);\n    const sorted = sortProducts(products, newSortValue);\n    setProducts(sorted);\n    //setProducts() side effects, any of the ones that use useState setter functions = side effects\n    console.log(newSortValue, \"target value\");\n  };\n\n  const addToCart = (list, cartItemsToUse) => {\n    let updatedCart = list;\n    let productAlreadyInCart = false;\n\n    if (productAlreadyInCart) {\n      updatedCart = list.forEach((item) => {\n        if (item.id === cartItemsToUse.id) {\n          item.count += 1;\n          productAlreadyInCart = true;\n        }\n      });\n    }\n    if (!productAlreadyInCart) {\n      updatedCart = cartItems.push({ ...product, count: 1 });\n    }\n    localStorage.setItem(\"cartItems\", JSON.stringify(cartItems));\n\n    return updatedCart;\n  };\n\n  const HandleAddToCart = (e) => {\n\n    const newSortValue = e.target.value;\n    setSortValue(newSortValue);\n    const updatedCart = addToCart(cartItems, updatedCart);\n    setProducts(sorted);\n    //setProducts() side effects, any of the ones that use useState setter functions = side effects\n    console.log(newSortValue, \"target value\");\n    \n    //   this.setState(state => {\n    //     const cartItems = state.cartItems;\n    //     let productAlreadyInCart = false;\n    //     cartItems.forEach(cp => {\n    //       if (cp.id === product.id) {\n    //         cp.count += 1;\n    //         productAlreadyInCart = true;\n    //       }\n    //     });\n    //     if (!productAlreadyInCart) {\n    //       cartItems.push({ ...product, count: 1 });\n    //     }\n    //     localStorage.setItem(\"cartItems\", JSON.stringify(cartItems));\n    //     return { cartItems: cartItems };\n    //   });\n  };\n\n  return (\n    <div>\n      <Banner />\n      <Container>\n        <h1 className=\"homepage-title\">Discover better-for-you Doggos</h1>\n\n        <Row>\n          <Col md={9}>\n            <Filter\n              sortValue={sortValue}\n              handleChangeSort={handleChangeSort}\n              count={products.length}\n            />\n\n            <hr />\n\n            <Products\n              products={products}\n              setProducts={setProducts}\n              HandleAddToCart={HandleAddToCart}\n            />\n          </Col>\n\n          <Col>\n            <Basket\n              cartItems={cartItems}\n              // handleRemoveFromCart={handleRemoveFromCart}\n            />\n          </Col>\n        </Row>\n      </Container>\n    </div>\n  );\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}